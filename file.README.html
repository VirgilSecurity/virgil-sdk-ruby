<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: README
  
    &mdash; Documentation by YARD 0.9.19
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "README";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="file_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><div id='filecontents'>
<h1 id="label-Virgil+Security+Ruby+SDK">Virgil Security Ruby SDK</h1>

<p><a href="https://travis-ci.org/VirgilSecurity/virgil-sdk-ruby"><img
src="https://travis-ci.org/VirgilSecurity/virgil-sdk-ruby.svg?branch=master"></a>
<a href="https://rubygems.org/gems/virgil-sdk"><img
src="https://img.shields.io/gem/v/virgil-sdk.svg"></a> <a
href="https://github.com/VirgilSecurity/virgil/blob/master/LICENSE"><img
src="https://img.shields.io/badge/license-BSD%203--Clause-blue.svg"></a> <a
href="https://virgilsecurity.github.io/virgil-sdk-ruby"><img
src="https://img.shields.io/badge/docs-yard-blue.svg"></a></p>

<p><a href="#introduction">Introduction</a> | <a href="#sdk-features">SDK
Features</a> | <a href="#installation">Installation</a> | <a
href="#initialization">Initialization</a> | <a href="#usage-examples">Usage
Examples</a> | <a href="#docs">Docs</a> | <a href="#support">Support</a></p>

<h2 id="label-Introduction">Introduction</h2>

<p>&lt;a href=“<a
href="https://developer.virgilsecurity.com/docs"><img">developer.virgilsecurity.com/docs”><img</a>
width=“230px” src=“<img
src="https://cdn.virgilsecurity.com/assets/images/github/logos/virgil-logo-red.png"
/>” align=“left” hspace=“10” vspace=“6”&gt;&lt;/a&gt; <a
href="https://virgilsecurity.com">Virgil Security</a> provides a set of
APIs for adding security to any application. In a few simple steps you can
encrypt communication, securely store data, provide passwordless login, and
ensure data integrity.</p>

<p>The Virgil SDK allows developers to get up and running with Virgil API
quickly and add full end-to-end security to their existing digital
solutions to become HIPAA and GDPR compliant and more.</p>

<h2 id="label-SDK+Features">SDK Features</h2>
<ul><li>
<p>communicate with <a
href="https://developer.virgilsecurity.com/docs/api-reference/card-service/v4">Virgil
Cards Service</a></p>
</li><li>
<p>manage users&#39; Public Keys</p>
</li><li>
<p>store private keys in secure local storage</p>
</li><li>
<p>use Virgil <a href="https://github.com/VirgilSecurity/virgil-crypto">Crypto
library</a></p>
</li></ul>

<h2 id="label-Installation">Installation</h2>

<p>The Virgil SDK is provided as a <a href="https://rubygems.org/">gem</a>
named <a href="https://rubygems.org/gems/virgil-sdk">virgil-sdk</a> and
available for Ruby 2.1 and newer. The package is distributed via
<em>bundler</em> package manager.</p>

<p>To install the package use the command below:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_gem'>gem</span> <span class='id identifier rubyid_install'>install</span> <span class='id identifier rubyid_virgil'>virgil</span><span class='op'>-</span><span class='id identifier rubyid_sdk'>sdk</span>
</code></pre>

<p>or add the following line to your Gemfile:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_gem'>gem</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>virgil-sdk</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>~&gt; 4.4</span><span class='tstring_end'>&#39;</span></span>
</code></pre>

<h2 id="label-Initialization">Initialization</h2>

<p>Be sure that you have already registered at the <a
href="https://developer.virgilsecurity.com/account/signin">Dev Portal</a>
and created your application.</p>

<p>To initialize the SDK at the <strong>Client Side</strong> you need only the
<strong>Access Token</strong> created for a client at Dev Portal. The
Access Token helps to authenticate client&#39;s requests.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_virgil'>virgil</span> <span class='op'>=</span> <span class='const'>VirgilApi</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>access_token:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[YOUR_ACCESS_TOKEN_HERE]</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
</code></pre>

<p>To initialize the SDK at the <strong>Server Side</strong> you need the
application credentials (<strong>Access Token</strong>, <strong>App
ID</strong>, <strong>App Key</strong> and <strong>App Key
Password</strong>) you got during Application registration at the Dev
Portal.</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># initialize Virgil SDK high-level instance.
</span><span class='id identifier rubyid_context'>context</span> <span class='op'>=</span> <span class='const'>VirgilContext</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
    <span class='label'>access_token:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[YOUR_ACCESS_TOKEN_HERE]</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='comment'># Credentials are required only to publish and revoke Virgil Cards.
</span>    <span class='label'>credentials:</span> <span class='const'>VirgilAppCredentials</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
        <span class='label'>app_id:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[YOUR_APP_ID_HERE]</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
        <span class='label'>app_key_data:</span> <span class='const'>VirgilBuffer</span><span class='period'>.</span><span class='id identifier rubyid_from_file'>from_file</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[YOUR_APP_KEY_PATH_HERE]</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='comma'>,</span>
        <span class='label'>app_key_password:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[YOUR_APP_KEY_PASSWORD_HERE]</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>

<span class='id identifier rubyid_virgil'>virgil</span> <span class='op'>=</span> <span class='const'>VirgilApi</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>context:</span> <span class='id identifier rubyid_context'>context</span><span class='rparen'>)</span>
</code></pre>

<h2 id="label-Usage+Examples">Usage Examples</h2>

<p>Before start practicing with the usage examples be sure that the SDK is
configured. Check out our <a
href="https://developer.virgilsecurity.com/docs/how-to#sdk-configuration">SDK
configuration guides</a> for more information.</p>

<h4 id="label-Generate+and+publish+user-27s+Cards+with+Public+Keys+inside+on+Cards+Service">Generate and publish user&#39;s Cards with Public Keys inside on Cards Service</h4>

<p>Use the following code to create and publish user&#39;s Card with Public
Key inside on Virgil Cards Service:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># generate a new Virgil Key
</span><span class='id identifier rubyid_alice_key'>alice_key</span> <span class='op'>=</span> <span class='id identifier rubyid_virgil'>virgil</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_generate'>generate</span><span class='lparen'>(</span><span class='rparen'>)</span>

<span class='comment'># save the Virgil Key into a storage
</span><span class='id identifier rubyid_alice_key'>alice_key</span><span class='period'>.</span><span class='id identifier rubyid_save'>save</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[KEY_NAME]</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[KEY_PASSWORD]</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

<span class='comment'># create a Virgil Card
</span><span class='id identifier rubyid_alice_card'>alice_card</span> <span class='op'>=</span> <span class='id identifier rubyid_virgil'>virgil</span><span class='period'>.</span><span class='id identifier rubyid_cards'>cards</span><span class='period'>.</span><span class='id identifier rubyid_create'>create</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>alice</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_alice_key'>alice_key</span><span class='rparen'>)</span>

<span class='comment'># export the Virgil Card to a string
</span><span class='id identifier rubyid_exported_alice_card'>exported_alice_card</span> <span class='op'>=</span> <span class='id identifier rubyid_alice_card'>alice_card</span><span class='period'>.</span><span class='id identifier rubyid_export'>export</span>

<span class='comment'># transmit the Card to your App Server
</span><span class='comment'># import the Virgil Card from the string
</span><span class='id identifier rubyid_alice_card'>alice_card</span> <span class='op'>=</span> <span class='id identifier rubyid_virgil'>virgil</span><span class='period'>.</span><span class='id identifier rubyid_cards'>cards</span><span class='period'>.</span><span class='id identifier rubyid_import'>import</span><span class='lparen'>(</span><span class='id identifier rubyid_exported_alice_card'>exported_alice_card</span><span class='rparen'>)</span>

<span class='comment'># publish the Virgil Card on the Virgil Cards Service
</span><span class='id identifier rubyid_virgil'>virgil</span><span class='period'>.</span><span class='id identifier rubyid_cards'>cards</span><span class='period'>.</span><span class='id identifier rubyid_publish'>publish</span><span class='lparen'>(</span><span class='id identifier rubyid_alice_card'>alice_card</span><span class='rparen'>)</span>
</code></pre>

<h4 id="label-Sign+then+encrypt+data">Sign then encrypt data</h4>

<p>Virgil SDK allows you to use a user&#39;s Private key and his or her Cards
to sign, then encrypt any kind of data.</p>

<p>In the following example, we load a Private Key from a customized Key
Storage and get recipient&#39;s Card from the Virgil Cards Services.
Recipient&#39;s Card contains a Public Key which we will encrypt the data
and verify a signature with.</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># load a Virgil Key from a device storage
</span><span class='id identifier rubyid_alice_key'>alice_key</span> <span class='op'>=</span> <span class='id identifier rubyid_virgil'>virgil</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_load'>load</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[KEY_NAME]</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[OPTIONAL_KEY_PASSWORD]</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

<span class='comment'># search for Virgil Cards
</span><span class='id identifier rubyid_bob_cards'>bob_cards</span> <span class='op'>=</span> <span class='id identifier rubyid_await'>await</span> <span class='id identifier rubyid_virgil'>virgil</span><span class='period'>.</span><span class='id identifier rubyid_cards'>cards</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bob</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

<span class='comment'># prepare a message
</span><span class='id identifier rubyid_message'>message</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hey Bob, how&#39;s it going?</span><span class='tstring_end'>&quot;</span></span>

<span class='comment'># sign then encrypt the message
</span><span class='id identifier rubyid_ciphertext'>ciphertext</span> <span class='op'>=</span> <span class='id identifier rubyid_alice_key'>alice_key</span><span class='period'>.</span><span class='id identifier rubyid_sign_then_encrypt'>sign_then_encrypt</span><span class='lparen'>(</span><span class='id identifier rubyid_message'>message</span><span class='comma'>,</span> <span class='id identifier rubyid_bob_cards'>bob_cards</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_base64'>to_base64</span>
</code></pre>

<h4 id="label-Decrypt+then+verify+data">Decrypt then verify data</h4>

<p>Once the Users have received the signed and encrypted message, they can
decrypt it with their own Private Key and verify the signature with
Sender&#39;s Card:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># load a Virgil Key from a device storage
</span><span class='id identifier rubyid_bob_key'>bob_key</span> <span class='op'>=</span> <span class='id identifier rubyid_virgil'>virgil</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_load'>load</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[KEY_NAME]</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[OPTIONAL_KEY_PASSWORD]</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

<span class='comment'># get a sender&#39;s Virgil Card
</span><span class='id identifier rubyid_alice_card'>alice_card</span> <span class='op'>=</span> <span class='id identifier rubyid_virgil'>virgil</span><span class='period'>.</span><span class='id identifier rubyid_cards'>cards</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[ALICE_CARD_ID]</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

<span class='comment'># decrypt the message
</span><span class='id identifier rubyid_original_message'>original_message</span> <span class='op'>=</span> <span class='id identifier rubyid_bob_key'>bob_key</span><span class='period'>.</span><span class='id identifier rubyid_decrypt_then_verify'>decrypt_then_verify</span><span class='lparen'>(</span><span class='id identifier rubyid_ciphertext'>ciphertext</span><span class='comma'>,</span> <span class='id identifier rubyid_alice_card'>alice_card</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
</code></pre>

<h2 id="label-Docs">Docs</h2>

<p>Virgil Security has a powerful set of APIs, and the documentation below can
get you started today.</p>

<p>In order to use the Virgil SDK with your application, you will need to
configure your application first. By default, the SDK will attempt to look
for Virgil-specific settings in your application but you can change it
during SDK configuration.</p>
<ul><li>
<p><a
href="https://developer.virgilsecurity.com/docs/how-to#sdk-configuration">Configure
the SDK</a> documentation</p>
</li><li>
<p><a
href="https://developer.virgilsecurity.com/docs/ruby/how-to/setup/v4/setup-authentication">Setup
authentication</a> to make API calls to Virgil Services</p>
</li><li>
<p><a
href="https://developer.virgilsecurity.com/docs/ruby/how-to/setup/v4/setup-card-manager">Setup
Card Manager</a> to manage user&#39;s Public Keys</p>
</li><li>
<p><a
href="https://developer.virgilsecurity.com/docs/ruby/how-to/setup/v4/setup-card-verifier">Setup
Card Verifier</a> to verify signatures inside of user&#39;s Card</p>
</li><li>
<p><a
href="https://developer.virgilsecurity.com/docs/ruby/how-to/setup/v4/setup-key-storage">Setup
Key storage</a> to store Private Keys</p>
</li><li>
<p><a
href="https://developer.virgilsecurity.com/docs/how-to#public-key-management">More
usage examples</a></p>
</li><li>
<p><a
href="https://developer.virgilsecurity.com/docs/ruby/how-to/public-key-management/v4/create-card">Create
& publish a Card</a> that has a Public Key on Virgil Cards Service</p>
</li><li>
<p><a
href="https://developer.virgilsecurity.com/docs/ruby/how-to/public-key-management/v4/search-card">Search
user’s Card by user’s identity</a></p>
</li><li>
<p><a
href="https://developer.virgilsecurity.com/docs/ruby/how-to/public-key-management/v4/get-card">Get
user’s Card by its ID</a></p>
</li><li>
<p><a
href="https://developer.virgilsecurity.com/docs/ruby/how-to/public-key-management/v4/use-card-for-crypto-operation">Use
Card for crypto operations</a></p>
</li><li>
<p><a href="https://developer.virgilsecurity.com/docs/api-reference">Reference
API</a></p>
</li></ul>

<h2 id="label-License">License</h2>

<p>This library is released under the <a href="LICENSE.md">3-clause BSD
License</a>.</p>

<h2 id="label-Support">Support</h2>

<p>Our developer support team is here to help you. Find out more information
on our <a href="https://help.virgilsecurity.com/">Help Center</a>.</p>

<p>You can find us on <a href="https://twitter.com/VirgilSecurity">Twitter</a>
or send us email support@VirgilSecurity.com.</p>

<p>Also, get extra help from our support team on <a
href="https://virgilsecurity.slack.com/join/shared_invite/enQtMjg4MDE4ODM3ODA4LTc2OWQwOTQ3YjNhNTQ0ZjJiZDc2NjkzYjYxNTI0YzhmNTY2ZDliMGJjYWQ5YmZiOGU5ZWEzNmJiMWZhYWVmYTM">Slack</a>.</p>
</div></div>

      <div id="footer">
  Generated on Tue May 21 04:42:01 2019 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.19 (ruby-2.4.1).
</div>

    </div>
  </body>
</html>